<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{% block title %}Painel — Rifas{% endblock %}</title>

  <!-- fontes / libs -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet"/>

  <style>
    :root{
      --bg:#0a0d12;
      --bg-2:#0f141c;
      --surface:#101620;
      --surface-2:#141c28;
      --surface-soft:rgba(20,28,40,.35);
      --line:rgba(255,255,255,.03);
      --ink:#e2e8f0;
      --muted:#94a3b8;
      --accent:#38bdf8;
      --success:#22c55e;
      --warn:#f97316;
      --danger:#ef4444;
      --radius:18px;
      --sidebar-w:240px;
      --shadow:0 16px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      background:
        radial-gradient(circle at 0% 0%, rgba(56,189,248,.12) 0, rgba(10,13,18,0) 35%),
        radial-gradient(circle at 120% 20%, rgba(34,197,94,.08) 0, rgba(10,13,18,0) 35%),
        linear-gradient(180deg, #0a0d12 0%, #080a0f 100%);
      background-color: #0a0d12;
      color:var(--ink);
      font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      line-height:1.4;
    }

    /* ===== LAYOUT GERAL ===== */
    .app-shell{
      display:flex;
      min-height:100vh;
    }

    /* ===== SIDEBAR ===== */
    .sidebar{
      width:var(--sidebar-w);
      background:rgba(8,10,15,.65);
      backdrop-filter:blur(28px);
      border-right:1px solid rgba(255,255,255,.02);
      display:flex;
      flex-direction:column;
      position:sticky;
      top:0;
      height:100vh;
      z-index:50;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      padding:16px 16px 14px;
      border-bottom:1px solid rgba(255,255,255,.02);
    }
    .brand-logo{
      width:38px;height:38px;border-radius:14px;
      background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.4), rgba(56,189,248,0) 45%),linear-gradient(160deg, #0f172a, #38bdf8 90%);
      display:grid;place-items:center;
    }
    .brand-name{font-weight:700;font-size:.9rem;}
    .brand-sub{display:block;font-size:.62rem;color:var(--muted);}

    .nav-group{padding:14px 8px;flex:1;overflow-y:auto;}
    .menu-link{
      display:flex;align-items:center;gap:10px;
      color:var(--muted);text-decoration:none;
      padding:8px 10px;border-radius:12px;margin-bottom:4px;
      font-weight:500;font-size:.78rem;
      transition:.14s;
    }
    .menu-link i{width:22px;text-align:center;font-size:.9rem;}
    .menu-link:hover{background:rgba(148,163,184,.08);color:#fff;}
    .menu-link.active{
      background:linear-gradient(90deg, rgba(56,189,248,.3) 0%, rgba(10,13,18,0) 88%);
      border:1px solid rgba(148,163,184,.06);
      color:#fff;
      box-shadow:0 20px 35px rgba(0,0,0,.2);
    }
    .sidebar-footer{
      padding:12px 12px 14px;
      border-top:1px solid rgba(255,255,255,.02);
      font-size:.63rem;
      color:rgba(226,232,240,.4);
    }

    /* ===== MAIN / TOPO ===== */
    .main{
      flex:1;
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }
    .topbar{
      height:56px;
      background:rgba(10,12,16,.2);
      backdrop-filter:blur(16px);
      border-bottom:1px solid rgba(255,255,255,.02);
      display:flex;align-items:center;gap:14px;
      padding:0 18px;
      position:sticky;top:0;z-index:40;
    }
    .topbar-title{font-weight:600;font-size:.9rem;}
    .topbar-search{flex:0 0 280px;}
    .search-wrap{position:relative;}
    .search-input{
      background:rgba(4,6,11,.65);
      border:1px solid rgba(255,255,255,.02);
      color:#fff;
      border-radius:999px;
      font-size:.68rem;
      padding:5px 26px 5px 26px;
      width:100%;
      outline:none;
    }
    .search-wrap i{
      position:absolute;left:9px;top:50%;transform:translateY(-50%);
      font-size:.68rem;color:rgba(255,255,255,.35);
    }
    .user-pill{
      margin-left:auto;
      display:flex;align-items:center;gap:10px;
      background:rgba(15,23,42,.1);
      border:1px solid rgba(255,255,255,.02);
      border-radius:999px;
      padding:4px 10px 4px 4px;
    }
    .user-avatar{
      width:30px;height:30px;border-radius:999px;
      background:linear-gradient(140deg, #38bdf8, #0f172a 80%);
      display:grid;place-items:center;font-weight:600;font-size:.7rem;
    }
    .user-name{font-size:.7rem;}
    .user-role{font-size:.58rem;color:rgba(255,255,255,.4);}

    /* ===== CONTEÚDO ===== */
    .content-wrap{
      padding:16px 16px 24px;
      display:flex;
      flex-direction:column;
      gap:14px;
      background:transparent; /* nada de fundo branco aqui */
      flex:1;
    }

    /* painel padrão – dark mesmo */
    .panel{
      background:linear-gradient(180deg, rgba(16,22,32,.95) 0%, rgba(11,16,23,.95) 100%);
      border:1px solid rgba(148,163,184,.03);
      border-radius:16px;
      box-shadow:0 16px 35px rgba(0,0,0,.25);
    }
    .panel-h{
      padding:12px 14px 8px;
      border-bottom:1px solid rgba(255,255,255,.02);
      display:flex;align-items:center;gap:8px;
    }
    .panel-h .title-sm{font-weight:600;font-size:.78rem;}
    .panel-c{padding:14px;}

    /* tabelas escuras */
    .table{
      color:var(--ink);
      font-size:.73rem;
      --bs-table-bg: transparent;
      --bs-table-color: var(--ink);
    }
    .table thead th{
      background:rgba(255,255,255,.015);
      border-bottom:1px solid rgba(255,255,255,.02);
      color:rgba(226,232,240,.55);
      text-transform:uppercase;
      font-size:.6rem;
      letter-spacing:.04em;
    }
    .table tbody td{
      border-color:rgba(148,163,184,.02);
      vertical-align:middle;
    }
    .table-hover tbody tr:hover{
      background:rgba(148,163,184,.03);
    }

    /* botões */
    .btn-accent{
      background:linear-gradient(180deg, #38bdf8, #0ea5e9);
      border:none;
      border-radius:14px;
      color:#02131e;
      font-weight:600;
      font-size:.72rem;
      padding:6px 14px;
    }
    .btn-dark-soft{
      background:rgba(12,16,22,.35);
      border:1px solid rgba(148,163,184,.08);
      color:#fff;
      border-radius:12px;
      font-size:.7rem;
      padding:6px 12px;
    }

    /* alerts escuros */
    .alert{
      background:rgba(15,23,42,.6);
      border:1px solid rgba(148,163,184,.05);
      color:#fff;
      font-size:.7rem;
    }

    /* responsivo */
    @media(max-width: 991px){
      .app-shell{flex-direction:column;}
      .sidebar{position:relative;width:100%;height:auto;flex-direction:row;overflow-x:auto;}
      .nav-group{display:flex;gap:6px;white-space:nowrap;}
      .topbar{position:relative;}
      .content-wrap{padding:12px;}
    }
    @media(max-width: 600px){
      .topbar-search{flex:1;}
      .user-pill{display:none;}
      .panel{border-radius:14px;}
    }
  </style>

  {% block head_extra %}{% endblock %}
</head>
<body>
  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-logo"><i class="fa-solid fa-ticket"></i></div>
        <div>
          <div class="brand-name">RifaPro</div>
          <span class="brand-sub">Painel administrativo</span>
        </div>
      </div>
      <nav class="nav-group">
        <a href="{% url 'adminx_dashboard' %}" class="menu-link {% if request.resolver_match.url_name == 'adminx_dashboard' %}active{% endif %}">
          <i class="fa-solid fa-gauge"></i> Dashboard
        </a>
        <a href="{% url 'adminx_pedidos' %}" class="menu-link {% if request.resolver_match.url_name == 'adminx_pedidos' or request.resolver_match.url_name == 'adminx_pedido_detail' %}active{% endif %}">
          <i class="fa-solid fa-receipt"></i> Pedidos
        </a>
        <a href="{% url 'adminx_rifas' %}" class="menu-link {% if request.resolver_match.url_name in 'adminx_rifas adminx_rifa_detail adminx_rifa_config' %}active{% endif %}">
          <i class="fa-solid fa-clover"></i> Rifas
        </a>
        <a href="/admin/" target="_blank" class="menu-link">
          <i class="fa-solid fa-screwdriver-wrench"></i> Admin Django
        </a>
        <a href="{% url 'adminx_logout' %}" class="menu-link">
          <i class="fa-solid fa-arrow-right-from-bracket"></i> Sair
        </a>
      </nav>
      <div class="sidebar-footer">
        RifaPro v1.0<br>
        Logado como: {{ request.user.username }}
      </div>
    </aside>

    <!-- MAIN -->
    <div class="main">
      <!-- TOPBAR -->
      <header class="topbar">
        <div class="topbar-title">Painel de Rifas</div>
        <div class="topbar-search d-none d-md-block">
          <form action="{% url 'adminx_pedidos' %}">
            <div class="search-wrap">
              <i class="fa-solid fa-magnifying-glass"></i>
              <input class="search-input" name="q" placeholder="Buscar por protocolo, cliente ou CPF">
            </div>
          </form>
        </div>
        <div class="user-pill">
          <div class="user-avatar">{{ request.user.username|default:"A"|first|upper }}</div>
          <div>
            <div class="user-name">{{ request.user.username }}</div>
            <div class="user-role">Administrador</div>
          </div>
          <a href="{% url 'adminx_logout' %}" class="text-decoration-none text-white-50 ms-1"><i class="fa-solid fa-chevron-down fa-xs"></i></a>
        </div>
      </header>

      <!-- CONTEÚDO -->
      <div class="content-wrap">
        <div class="panel">
          <div class="panel-c">
            {% for m in messages %}
              <div class="alert alert-info py-2 px-3 mb-2">{{ m }}</div>
            {% endfor %}
            {% block content %}{% endblock %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  {% block scripts_extra %}{% endblock %}
</body>
</html>
